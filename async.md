## 异步编程
异步（async）是区分同步（sync）来说的。
异步编程模型的关键在于在IO等待期间切换至其他代码执行，并且在IO阻塞结束时通知程序并完成相应的工作。
异步编程的优势在于**单线程**，**IO高并发**：
- 在IO阻塞期间无需等待，并发IO性能优越
- 在单个线程中切换执行的“流”，故没有大量线程的线程切换的开销
- 不存在线程资源共享的加锁、死锁等问题
异步编程的劣势在于**编程逻辑不如多线程直观**，**无法利用多核计算**，**只能加速IO**
异步编程的底层一般是操作系统提供的*事件机制*。
异步编程的两类常见实现是**回调**、**协程**：
- **回调**指的是为IO事件*注册*一个函数，通过事件触发时自动调用该函数来完成后续相应的工作。
  - 回调的优势是上手简单，只需注册函数即可，也易于理解
  - 回调的缺点是大量回调导致“回调地狱”：回调反复嵌套，代码根本不是自顶而下执行的导致难以理解；异常难以处理
  - 摆脱回调地狱的一个方法是`Promise/Future`
- **协程**是一种特殊的过程（也就是函数）：它可以在执行到阻塞位置时*挂起*，从而切换到其它协程处理，一直到阻塞结束了再被*唤醒*然后继续执行。协程不会导致回调地狱，它可以被逻辑上视为比线程小一个粒度的完全由用户代码调度的“子线程”